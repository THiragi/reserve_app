<% provide(:title, @room.room_name) %>
<% today = Date.today %>
<input type="hidden" id="room-id" data-room-id="<%= @room.id %>"/>
<h2><%= @room.room_name %> -<%= @room_type.type_name %>- の予約状況</h2>

<div class="content">
  <div class="icon">
  <button id="prev_weeks">
    <%= hidden_field_tag :date, @start %>
    ▲
  </button>
  </div>
  <table class="calendar-table">
    <caption >
      <% if (@start..@start.weeks_since(2)-1).include?(today) %>
        <%= today.strftime('%Y年%m月') %>
      <% else %>
        <%= start.strftime('%Y年%m月') %>
      <% end %>
    </caption>
    <thead>
      <tr>
        <th style="color: #dc6b9a;">日</th>
        <th>月</th>
        <th>火</th>
        <th>水</th>
        <th>木</th>
        <th>金</th>
        <th style="color: #4496d3;">土</th>
      </tr>
    </thead>
    <tbody id="calendar-area">
      <%= render partial: 'calendar', locals: {start: @start, room: @room, room_type: @room_type}%>
    </tbody>
  </table>
<div class="icon">
<button id="next_weeks">
<%= hidden_field_tag :date, @start %>
▼
</button>
</div>

<div class="check_form">
  <div id="date_checkin">
  </div>

  <form class="date_form">
    <ul>
      <li><label for="checkin">チェックイン日：</label></li>
      <li><input type="hidden" name="checkin" id="checkin" min="<%= today %>" max="<%= today.years_since(3) %>"/></li>
      <li><div id="indate_display"></div></li>
      <li><div id="msg_checkin"> </div></li>
    </ul>
    <ul>
      <li><label for="checkout">チェックアウト日：</label></li>
      <li><input type="hidden" name="checkout" id="checkout"/></li>
      <li><div id="outdate_display"></div></li>
      <li><div id="msg_checkout"> </div></li>
    </ul>
    <ul>
      <li><label for="guest_count">人数：</label></li>
      <li>（定員<span class="capacity"><%= @room_type.capacity %></span>人）<input type="number" name="guestcount" id="guestcount" min="1" max="<%= @room_type.capacity %>" value="<%= @room_type.capacity %>"/><span>人</span></li>
      <li><div id="msg_guestcount"></div></li>
    </ul>
  </form>


  <div class="btn_bars">
    <span id="msg_full"></span>
    <input type="button" id="clr" class="btn" value="入力内容をクリア"/>
    <input type="button" id="calc" class="btn" value="料金を計算する"/>
  </div>
  <div id="total">
  </div>
</div>
